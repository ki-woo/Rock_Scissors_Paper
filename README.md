# Rock-Scissors-Paper

**$e^{i \pi}$** | Rock-Scissors-Paper (확률과 통계 수행평가)

Goal : Find the average number of trials when n people play Rock-Scissors-Paper

Date : **Jun19-Jul21 2024** (33 days)

Partner : **BaumKim** (main), **JongminKim**

## 코드 내용
- expect.py는 아래의 점화식에 따라 이론적 기대값을 구하는 코드입니다.
- approx.py는 수많은 가위바위보 시뮬레이션을 돌려 평균을 내어 기대값을 구하는 코드입니다.

## 개발 동기 *(BaumKim 작성)*
김종민이 시험 일주일 전에(2025.6.19.) 갑자기 “4명이서 가위바위보를 해. 이긴 사람 1명만 남을 때까지 가위바위보를 한 횟수의 기댓값은 얼마일까?”라며 문제를 냈다. 문제는 어려웠지만 풀 수는 있을 것 같아 오기가 생겨 일반항을 구하려는 시도로 이어졌다. 이 문제에 도전하다 보니 모둠 탐구로 만들 수 있을 정도의 협업이 이루어져 보고서를 작성했다.

## 탐구 내용 요약 *(BaumKim 작성)*
가위바위보를 다음 규칙에 따라 진행한다.
 1) 가위바위보 한 번을 한 시행으로 하며, 이긴 사람들만 다음 시행에서 가위바위보를 할 수 있다.
 2) 무승부 시, 모두가 다음 시행에서 가위바위보를 할 수 있다.
 3) 1명만 승리하면 시행을 종료한다.

2명, 3명, 4명이 가위바위보 할 때 최종 시행 횟수의 평균을 다양한 방법으로 구했다. 멱급수를 등비수열과 그 계수로 쪼개 계수에 따라 등비수열을 무한히 늘어놓아 평균을 계산하기도 했고, 더 적은 수의 사람이 가위바위보 할 때의 평균을 이용해 구하기도 했다.

n명이 가위바위보 할 때의 평균을 (a+b+c)^n의 계수를 이용해 점화식으로 나타냈고, 이를 파이썬 프로그램으로 계산한 값과 random 모듈로 구한 평균을 비교해 검증했다.

더 나아가, 가위바위보 최종 횟수의 모평균, 모분산, 표본 평균, 표본 분산 등을 파이썬 프로그램으로 계산해 표본 분산을 구할 때 편차 제곱의 합을 (표본의 크기)-1로 나눠야 함을 확인했다. *(이 부분은 내(Kiwoo)가 만든 게 아니라 코드가 없다.)*

## 가위바위보 공식 *(BaumKim 작성)*
$(a+b+c)^n$의 전개식

$a b^{n-1}$, $b c^{n-1}$, $c a^{n-1}$의 계수 : $_nC_1$ \
$a^2 b^{n-2}$, $b^2 c^{n-2}$, $c^2 a^{n-2}$의 계수 : $_nC_2$ \
$a b^{n-1}$, $b c^{n-1}$, $c a^{n-1}$의 계수 : $_nC_1$\
. . . \
$a^{n-1} b,\ b^{n-1} c,\ c^{n-1} a$의 계수 : $_nC_{n-1}$

$a b^{n-1}$, $b c^{n-1}$, $c a^{n-1}$의 계수합 : $3_nC_1$ \
$a^2 b^{n-2}$, $b^2 c^{n-2}$, $c^2 a^{n-2}$의 계수합 : $3_nC_2$ \
$a b^{n-1}$, $b c^{n-1}$, $c a^{n-1}$의 계수합 : $3_nC_1$\
. . . \
$a^{n-1} b,\ b^{n-1} c,\ c^{n-1} a$의 계수합 : $3_nC_{n-1}$

나머지 항의 계수 합 : $3^n-3(2^n-2)$ $(\because 이항정리)$

$a$, $b$, $c$가 각각 가위, 바위, 보라 하자.
그러면 $E_n$(n명이 가위바위보 할 때의 평균)의 점화식을 구할 수 있다.

$
E_n = \frac{3_nC_2}{3^n} + \frac{3_nC_2}{3^n}(E_2 + 1) + \frac{3_nC_3}{3^n}(E_3 + 1) + ... + \frac{3_nC_{n-1}}{3^n}(E_{n-1} + 1) + \frac{3^n - 3(2^n-2)}{3^n}(E_{n} + 1) \\
$

$
\frac{2^n-2}{3^{n-1}}E_n = \frac{_nC_2E_2 + _nC_3E_3+ ... + _nC_{n-1}E_{n-1}}{3^{n-1}} + \frac{_nC_1 + _nC_2 + _nC_3 + ... + _nC_{n-1} - (2^n - 2)}{3^{n-1}} + 1
$

$
\frac{2^n-2}{3^{n-1}}E_n = \frac{3^{n-1} + \sum^{n-1}_{k=2} {_nC_kE_k}}{3^{n-1}}
$

$
\therefore E_n = \frac{3^{n-1} + \sum^{n-1}_{k=2} {_nC_kE_k}}{2^n-2}\ (n \ge 2,\ E_1 = 0)
$

## 결과 예시

```
< 10명이서 가위바위보 1000회 실행시 평균 시행 횟수 >
근사값 : 23.888
기대값 : 24.349597758456483 (8327737507/342007190)
```

